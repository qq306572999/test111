<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一线吃瓜网</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="swiper.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- 整合所有样式：轮播 + 小雨客服（含QQ式头像布局） -->
    <style>
        /* 原页面轮播样式 */
        .profile{
            position: relative; 
            overflow: hidden;
            border: 4px solid rgba(255,255,255,.3);
            border-radius: 10px;
        }
        .profile img{
            width: 100% !important;
            height: auto !important;
            display: block;
        }
        .profile .swiper-button-next,
        .profile .swiper-button-prev{
            color: #fff;
        }
        .swiper-button-next:after, 
        .swiper-button-prev:after{
            font-size: 20px;
        }
        .fgt{height: 20px;}
        .swiper{padding-bottom: 25px;}
        .main-link{
            width: 60%; 
            margin:10px auto;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            text-decoration: none;
        }
        .pr_wbnr h3{
            font-size: 12px; 
            line-height: 22px; 
            color: #333;
            text-align: left;
        }

        /* 小雨客服样式：QQ式聊天布局（头像+气泡） */
        /* 1. 触发按钮 */
        .service-trigger-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: #0084ff;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(0,132,255,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            z-index: 9998;
            transition: all 0.3s;
        }
        .service-trigger-btn:hover {
            transform: scale(1.1);
            background: #0073e6;
        }

        /* 2. 客服弹窗 */
        .service-popup {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 380px;
            border: 1px solid #eee;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            background: #fff;
            overflow: hidden;
            font-family: "Microsoft YaHei", sans-serif;
            display: none;
            z-index: 9999;
            flex-direction: column;
        }

        /* 3. 弹窗头部 */
        .popup-header {
            padding: 12px 16px;
            background: #f5f5f5;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header-left {
            display: flex;
            align-items: center;
        }
        .service-name {
            font-weight: 600;
            color: #333;
            margin-right: 8px;
            font-size: 15px;
        }
        .online-status {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4cd964;
            margin-right: 4px;
            animation: blink 1.5s infinite;
        }
        .status-text {
            font-size: 12px;
            color: #666;
        }
        .popup-close {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #999;
            transition: all 0.2s;
        }
        .popup-close:hover {
            background: #f0f0f0;
            color: #333;
        }

        /* 4. 聊天消息区域：核心QQ式布局 */
        .message-container {
            height: 400px;
            padding: 16px;
            overflow-y: auto;
            background: #fafafa;
            flex: 1;
        }
        /* 消息行容器：头像+气泡 */
        .message-row {
            margin-bottom: 16px;
            display: flex; /* 横向排列：头像+气泡 */
            clear: both;
        }
        /* 客服消息：头像居左，气泡在右 */
        .service-message-row {
            align-items: flex-start; /* 气泡顶部与头像顶部对齐 */
        }
        /* 用户消息：头像居右，气泡在左（如需用户头像可启用） */
        .user-message-row {
            flex-direction: row-reverse; /* 反转顺序：气泡左，头像右 */
            align-items: flex-start;
        }

        /* 小雨头像样式（b1.png） */
        .service-avatar-img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 8px; /* 头像与气泡间距 */
            border: 1px solid #eee;
        }
        /* 用户头像（如需可启用） */
        .user-avatar-img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            margin-left: 8px;
            border: 1px solid #eee;
            display: none; /* 暂不显示用户头像，如需显示改为block */
        }

        /* 消息气泡样式 */
        .message-bubble {
            max-width: 75%; /* 气泡最大宽度，避免过宽 */
            padding: 10px 14px;
            border-radius: 18px;
            line-height: 1.5;
            font-size: 14px;
            position: relative;
        }
        /* 客服气泡：浅蓝色背景，左侧小三角 */
        .service-bubble {
            background: #e5f3ff;
            color: #333;
            border-top-left-radius: 4px; /* 左上角圆角减小，更像QQ */
        }
        /* 客服气泡左侧小三角（伪元素） */
        .service-bubble::before {
            content: '';
            position: absolute;
            left: -6px; /* 气泡左侧外部 */
            top: 10px; /* 三角垂直位置 */
            width: 0;
            height: 0;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            border-right: 6px solid #e5f3ff; /* 与气泡背景同色 */
        }

        /* 用户气泡：蓝色背景，右侧小三角 */
        .user-bubble {
            background: #0084ff;
            color: #fff;
            border-top-right-radius: 4px;
        }
        /* 用户气泡右侧小三角 */
        .user-bubble::before {
            content: '';
            position: absolute;
            right: -6px;
            top: 10px;
            width: 0;
            height: 0;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            border-left: 6px solid #0084ff;
        }

        /* 5. 用户上传图片预览 */
        .user-images {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
            max-width: 75%;
            margin-left: auto; /* 跟随用户消息右对齐 */
        }
        .user-images img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #eee;
        }

        /* 6. 底部上传区域 */
        .input-area {
            padding: 12px 16px;
            border-top: 1px solid #eee;
            background: #fff;
        }
        .img-upload {
            display: inline-block;
            padding: 8px 16px;
            background: #0084ff;
            color: #fff;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        .img-upload:hover {
            background: #0073e6;
        }
        #img-input {
            display: none;
        }
        .upload-tip {
            font-size: 12px;
            color: #999;
            margin-top: 8px;
            text-align: center;
        }
        .warning-tip {
            font-size: 12px;
            color: #ff4d4f;
            margin-top: 4px;
            text-align: center;
            display: none;
        }

        /* 在线状态闪烁动画 */
        @keyframes blink {
            0%,100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 背景动画 -->
        <div class="background-animation">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="floating-shape shape-3"></div>
            <div class="floating-shape"></div>
            <div class="floating-shape"></div>
        </div>

        <!-- 主要内容 -->
        <main class="profile-container">
            <div class="shimmer-line"></div>
            
            <!-- 个人信息区域 -->
            <section class="profile-header">
                <div class="avatar-container">
                    <img src="Tx.jpg" alt="头像" class="avatar" id="avatarImg">
                    <div class="avatar-border"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-dot"></div>
                    <div class="admin-secret-entry" id="adminSecretEntry">
                        <i class="fas fa-cog"></i>
                    </div>
                </div>
                
                <h1 class="profile-name" id="profileName">www.636.icu</h1>
                <p class="profile-bio" id="profileBio" style="font-size: 28px; color: #fff;">一线吃瓜网</p>

                <!-- 第一组轮播（a1-a5） -->
                <div class="profile">
                    <div class="swiper mySwiper" id="swiperGroup1">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="a1.png" style="width: 100%;" alt="第一组图1"/></div>
                            <div class="swiper-slide"><img src="a2.png" style="width: 100%;" alt="第一组图2"/></div>
                            <div class="swiper-slide"><img src="a3.png" style="width: 100%;" alt="第一组图3"/></div>
                            <div class="swiper-slide"><img src="a4.png" style="width: 100%;" alt="第一组图4"/></div>
                            <div class="swiper-slide"><img src="a5.png" style="width: 100%;" alt="第一组图5"/></div>
                        </div>
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                        <div class="swiper-pagination"></div>
                        <a href="https://f.wps.cn/g/mVSCm5ZJ/" class="main-link gradient-1" data-analytics="官网">
                            <span class="watermelon-icon">🍉</span>
                            <span>热门吃瓜</span>
                            <b>获取<br />资源</b> 
                            <i class="fas fa-arrow-right arrow"></i>
                        </a>
                    </div>
                </div>
                <div class="fgt"></div>

                <!-- 第二组轮播（a6-a10） -->
                <div class="profile">
                    <div class="swiper mySwiper" id="swiperGroup2">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="a6.png" style="width: 100%;" alt="第二组图1"/></div>
                            <div class="swiper-slide"><img src="a7.png" style="width: 100%;" alt="第二组图2"/></div>
                            <div class="swiper-slide"><img src="a8.png" style="width: 100%;" alt="第二组图3"/></div>
                            <div class="swiper-slide"><img src="a9.png" style="width: 100%;" alt="第二组图4"/></div>
                            <div class="swiper-slide"><img src="a10.png" style="width: 100%;" alt="第二组图5"/></div>
                        </div>
                        <a href="https://f.wps.cn/g/mVSCm5ZJ/" class="main-link gradient-2" data-analytics="作品集">
                            <i class="fas fa-cloud"></i>
                            <span>反差女神</span>
                            <b>获取<br />资源</b> 
                            <i class="fas fa-arrow-right arrow"></i>
                        </a>
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                        <div class="swiper-pagination"></div>
                    </div>
                </div>
                <div class="fgt"></div>

                <!-- 第三组轮播（a11-a15） -->
                <div class="profile">
                    <div class="swiper mySwiper" id="swiperGroup3">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="a11.png" style="width: 100%;" alt="第三组图1"/></div>
                            <div class="swiper-slide"><img src="a12.png" style="width: 100%;" alt="第三组图2"/></div>
                            <div class="swiper-slide"><img src="a13.png" style="width: 100%;" alt="第三组图3"/></div>
                            <div class="swiper-slide"><img src="a14.png" style="width: 100%;" alt="第三组图4"/></div>
                            <div class="swiper-slide"><img src="a15.png" style="width: 100%;" alt="第三组图5"/></div>
                        </div>
                        <a href="https://f.wps.cn/g/mVSCm5ZJ/" class="main-link gradient-3" data-analytics="博客">
                            <span class="penguin-icon">🧭</span>
                            <span>silk/女性向</span>
                            <b>获取<br />资源</b> 
                            <i class="fas fa-arrow-right arrow"></i>
                        </a>
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                        <div class="swiper-pagination"></div>
                    </div>
                </div>
                <div class="fgt"></div>

                <!-- 第四组轮播（a16-a20） -->
                <div class="profile">
                    <div class="swiper mySwiper" id="swiperGroup4">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="a16.png" style="width: 100%;" alt="第四组图1"/></div>
                            <div class="swiper-slide"><img src="a17.png" style="width: 100%;" alt="第四组图2"/></div>
                            <div class="swiper-slide"><img src="a18.png" style="width: 100%;" alt="第四组图3"/></div>
                            <div class="swiper-slide"><img src="a19.png" style="width: 100%;" alt="第四组图4"/></div>
                            <div class="swiper-slide"><img src="a20.png" style="width: 100%;" alt="第四组图5"/></div>
                        </div>
                        <a href="https://f.wps.cn/g/mVSCm5ZJ/" class="main-link gradient-4" data-analytics="往期">
                            <i class="fas fa-history"></i>
                            <span>绅士游戏</span>
                            <b>获取<br />资源</b> 
                            <i class="fas fa-arrow-right arrow"></i>
                        </a>
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                        <div class="swiper-pagination"></div>
                    </div>
                </div>
            </section>

            <!-- 二维码区域 -->
            <section class="qr-section">
                <div class="qr-container">
                    <p class="qr-text">一线吃瓜网</p>
                    <div class="pr_wbnr">
                        <h3 style="overflow: hidden; text-overflow:ellipsis; white-space: nowrap;">一线吃瓜网攻克各种资源难题，带来最新最快最全的吃瓜黑料啊啊啊啊</h3>	
                        <h3 style="overflow: hidden; text-overflow:ellipsis; white-space: nowrap;">明星、网红、女神、校园…………</h3>	
                        <h3 style="overflow: hidden; text-overflow:ellipsis; white-space: nowrap;">让您不错过任何一个热门大瓜</h3>	
                        <p style="text-align: right; color: #ff0000;font-weight: bold; font-size: 12px; margin-top: 10px;">非法律允许地区以及18岁以下用户禁止访问！</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- 底部工具栏 -->
        <footer class="toolbar" style="z-index: 100;">
            <button class="tool-btn" id="shareBtn">
                <i class="fas fa-share-alt"></i>
                <span>分享</span>
            </button>
        </footer>

        <!-- 分享模态框 -->
        <div class="modal" id="shareModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>分享我的链接</h3>
                    <button class="close-btn" id="closeShareModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="share-content">
                    <div class="share-url">
                        <input type="text" id="shareUrl" value="" readonly>
                        <button class="copy-btn" id="copyUrlBtn">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 1. 小雨客服触发按钮 -->
    <div class="service-trigger-btn" id="serviceTriggerBtn">
        <i class="fas fa-comments"></i>
    </div>

    <!-- 2. 小雨客服弹窗（含头像的QQ式聊天） -->
    <div class="service-popup" id="servicePopup">
        <!-- 弹窗头部 -->
        <div class="popup-header">
            <div class="header-left">
                <div class="service-name">小雨</div>
                <div class="online-status"></div>
                <div class="status-text">在线中</div>
            </div>
            <div class="popup-close" id="popupClose">
                <i class="fas fa-times"></i>
            </div>
        </div>

        <!-- 消息区域：初始显示小雨的对话（带b1.png头像） -->
        <div class="message-container" id="messageContainer">
            <!-- 小雨的消息行：头像（b1.png）+ 气泡 -->
            <div class="message-row service-message-row">
                <!-- 小雨头像：b1.png（与a1-a20同目录） -->
                <img src="b1.png" alt="小雨头像" class="service-avatar-img">
                <!-- 消息气泡 -->
                <div class="message-bubble service-bubble">
                    请将评论的规范截图都发送给我，审核通过后我会发送所有资源的跳转页链接~<br>
                    注意：不规范截图和发送重复的截图将重置进度，所以是一定不能投机取巧的哦。
                </div>
            </div>
        </div>

        <!-- 上传区域 -->
        <div class="input-area">
            <label for="img-input" class="img-upload">
                <i class="fas fa-upload"></i> 选择截图（需4张）
            </label>
            <input type="file" id="img-input" accept="image/jpg,image/png,image/jpeg" multiple>
            <div class="upload-tip" id="uploadTip">已选择：0/4张</div>
            <div class="warning-tip" id="warningTip">⚠️ 不规范/重复截图，进度已重置！</div>
        </div>
    </div>

    <!-- 外部脚本引入 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script src="swiper.min.js"></script>
    <script src="simple-script.js"></script>

    <!-- 轮播初始化脚本 -->
    <script>
        // 第一组
        var swiper1 = new Swiper("#swiperGroup1", {
            spaceBetween: 0,
            centeredSlides: true,
            loop:true,
            autoplay: {delay: 2500, disableOnInteraction: false},
            pagination: {el: "#swiperGroup1 .swiper-pagination", clickable: true},
            navigation: {nextEl: "#swiperGroup1 .swiper-button-next", prevEl: "#swiperGroup1 .swiper-button-prev"},
        });

        // 第二组
        var swiper2 = new Swiper("#swiperGroup2", {
            spaceBetween: 0,
            centeredSlides: true,
            loop:true,
            autoplay: {delay: 3000, disableOnInteraction: false},
            pagination: {el: "#swiperGroup2 .swiper-pagination", clickable: true},
            navigation: {nextEl: "#swiperGroup2 .swiper-button-next", prevEl: "#swiperGroup2 .swiper-button-prev"},
        });

        // 第三组
        var swiper3 = new Swiper("#swiperGroup3", {
            spaceBetween: 0,
            centeredSlides: true,
            loop:true,
            autoplay: {delay: 3500, disableOnInteraction: false},
            pagination: {el: "#swiperGroup3 .swiper-pagination", clickable: true},
            navigation: {nextEl: "#swiperGroup3 .swiper-button-next", prevEl: "#swiperGroup3 .swiper-button-prev"},
        });

        // 第四组
        var swiper4 = new Swiper("#swiperGroup4", {
            spaceBetween: 0,
            centeredSlides: true,
            loop:true,
            autoplay: {delay: 4000, disableOnInteraction: false},
            pagination: {el: "#swiperGroup4 .swiper-pagination", clickable: true},
            navigation: {nextEl: "#swiperGroup4 .swiper-button-next", prevEl: "#swiperGroup4 .swiper-button-prev"},
        });
    </script>

    <!-- 3. 小雨客服核心逻辑（含头像消息渲染） -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM元素获取
            const triggerBtn = document.getElementById('serviceTriggerBtn');
            const servicePopup = document.getElementById('servicePopup');
            const popupClose = document.getElementById('popupClose');
            const messageContainer = document.getElementById('messageContainer');
            const imgInput = document.getElementById('img-input');
            const uploadTip = document.getElementById('uploadTip');
            const warningTip = document.getElementById('warningTip');

            // 状态管理
            let uploadedKeys = []; // 存储“文件名+大小”防重复
            let currentCount = 0;
            const needCount = 4; // 需上传4张图

            // 1. 弹窗显示/隐藏
            triggerBtn.addEventListener('click', () => {
                servicePopup.style.display = 'flex';
                triggerBtn.style.display = 'none';
                messageContainer.scrollTop = messageContainer.scrollHeight;
            });

            popupClose.addEventListener('click', () => {
                servicePopup.style.display = 'none';
                triggerBtn.style.display = 'flex';
            });

            // 2. 截图上传处理
            imgInput.addEventListener('change', (e) => {
                const selectedFiles = Array.from(e.target.files);
                if (selectedFiles.length === 0) return;

                // 检测剩余可上传数量
                const remaining = needCount - currentCount;
                if (selectedFiles.length > remaining) {
                    showWarning(`最多只能上传${remaining}张（需共传4张）`);
                    resetProgress();
                    return;
                }

                // 检测重复截图
                const hasDuplicate = selectedFiles.some(file => {
                    const key = `${file.name}-${file.size}`;
                    return uploadedKeys.includes(key);
                });

                // 检测不规范截图（非图片/小于10KB）
                const validTypes = ['image/jpeg', 'image/png', 'image/jpg'];
                const hasInvalid = selectedFiles.some(file => {
                    return !validTypes.includes(file.type) || file.size < 10240;
                });

                // 违规处理
                if (hasDuplicate || hasInvalid) {
                    const tip = hasDuplicate ? '重复截图' : '不规范截图（非图片/过小）';
                    showWarning(tip);
                    resetProgress();
                    return;
                }

                // 合规处理：更新进度+显示用户截图
                hideWarning();
                selectedFiles.forEach(file => {
                    uploadedKeys.push(`${file.name}-${file.size}`);
                });
                currentCount += selectedFiles.length;
                uploadTip.textContent = `已选择：${currentCount}/${needCount}张`;

                // 显示用户上传的截图（用户消息行，无头像）
                showUserImages(selectedFiles);

                // 上传满4张：触发小雨的回复（带头像）
                if (currentCount === needCount) {
                    setTimeout(() => {
                        showServiceReply(`
                            ✅ 宝子恭喜你获得资源（一共有3个获取入口，如果其中一个和谐或者没有想看的就换一个渠道）
                            速度保存到自己网盘，因为链接随时失效，3个渠道建议全部保存到自己的网盘，因为每个网盘的资源都不一样。
                            <br><br>
                            1. <a href="https://f.wps.cn/g/mVSCm5ZJ/" target="_blank" style="color:#0084ff; text-decoration:underline;">热门吃瓜入口</a><br>
                            2. <a href="https://f.wps.cn/g/mVSCm5ZJ/" target="_blank" style="color:#0084ff; text-decoration:underline;">反差女神入口</a><br>
                            3. <a href="https://f.wps.cn/g/mVSCm5ZJ/" target="_blank" style="color:#0084ff; text-decoration:underline;">绅士游戏入口</a>
                        `);
                        // 5秒后重置进度
                        setTimeout(resetProgress, 5000);
                    }, 1500);
                }

                imgInput.value = '';
            });

            // 辅助函数：显示用户上传的图片
            function showUserImages(files) {
                // 用户消息行（无头像）
                const userRow = document.createElement('div');
                userRow.className = 'message-row user-message-row';

                // 用户消息气泡（显示“我上传了X张截图”）
                const userBubble = document.createElement('div');
                userBubble.className = 'message-bubble user-bubble';
                userBubble.textContent = `我上传了${files.length}张截图：`;

                // 图片预览容器
                const imgContainer = document.createElement('div');
                imgContainer.className = 'user-images';
                files.forEach(file => {
                    const img = document.createElement('img');
                    img.src = URL.createObjectURL(file);
                    img.alt = `用户截图${currentCount - files.length + 1}`;
                    imgContainer.appendChild(img);
                });

                // 组装用户消息行：气泡 + 图片
                userRow.appendChild(userBubble);
                messageContainer.appendChild(userRow);
                messageContainer.appendChild(imgContainer);
                messageContainer.scrollTop = messageContainer.scrollHeight;
            }

            // 辅助函数：显示小雨的回复（带b1.png头像）
            function showServiceReply(content) {
                // 小雨消息行：头像 + 气泡
                const serviceRow = document.createElement('div');
                serviceRow.className = 'message-row service-message-row';

                // 小雨头像（b1.png）
                const serviceAvatar = document.createElement('img');
                serviceAvatar.src = 'b1.png';
                serviceAvatar.alt = '小雨头像';
                serviceAvatar.className = 'service-avatar-img';

                // 小雨消息气泡
                const serviceBubble = document.createElement('div');
                serviceBubble.className = 'message-bubble service-bubble';
                serviceBubble.innerHTML = content; // 支持HTML（如链接）

                // 组装消息行并添加到容器
                serviceRow.appendChild(serviceAvatar);
                serviceRow.appendChild(serviceBubble);
                messageContainer.appendChild(serviceRow);
                messageContainer.scrollTop = messageContainer.scrollHeight;
            }

            // 辅助函数：显示/隐藏警告
            function showWarning(text) {
                warningTip.textContent = `⚠️ ${text}，进度已重置！`;
                warningTip.style.display = 'block';
                setTimeout(hideWarning, 3000);
            }

            function hideWarning() {
                warningTip.style.display = 'none';
            }

            // 辅助函数：重置进度
            function resetProgress() {
                uploadedKeys = [];
                currentCount = 0;
                uploadTip.textContent = `已选择：0/${needCount}张`;
                imgInput.value = '';
            }

            // 分享模态框逻辑
            const shareBtn = document.getElementById('shareBtn');
            const shareModal = document.getElementById('shareModal');
            const closeShareModal = document.getElementById('closeShareModal');
            const shareUrl = document.getElementById('shareUrl');
            const copyUrlBtn = document.getElementById('copyUrlBtn');

            // 填充默认分享链接
            shareUrl.value = window.location.origin || 'https://www.636.icu';

            shareBtn.addEventListener('click', () => shareModal.style.display = 'block');
            closeShareModal.addEventListener('click', () => shareModal.style.display = 'none');
            window.addEventListener('click', (e) => e.target === shareModal && (shareModal.style.display = 'none'));

            // 复制链接反馈
            copyUrlBtn.addEventListener('click', () => {
                shareUrl.select();
                document.execCommand('copy');
                copyUrlBtn.innerHTML = '<i class="fas fa-check"></i>';
                setTimeout(() => copyUrlBtn.innerHTML = '<i class="fas fa-copy"></i>', 1500);
            });
        });
    </script>
</body>
</html>